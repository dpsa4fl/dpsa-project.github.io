<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Executes the provided request function and awaits the returned future, retrying using the parameters in the provided `ExponentialBackoff` if the `reqwest::Error` returned by `request_fn` is:"><title>retry_http_request in janus_core::retries - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="janus_core" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0 (cc66ad468 2023-10-03)" data-channel="1.73.0" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-1596385f77d47ef2.css" data-theme-dark-css="dark-0a43001d3fc2282c.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-1596385f77d47ef2.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-0a43001d3fc2282c.css"><link rel="stylesheet" href="../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../janus_core/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../janus_core/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><div class="sidebar-elems"><h2><a href="index.html">In janus_core::retries</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../index.html">janus_core</a>::<wbr><a href="index.html">retries</a>::<wbr><a class="fn" href="#">retry_http_request</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/janus_core/retries.rs.html#72-118">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub async fn retry_http_request&lt;RequestFn, ResultFuture&gt;(
    backoff: <a class="type" href="../../backoff/type.ExponentialBackoff.html" title="type backoff::ExponentialBackoff">ExponentialBackoff</a>,
    request_fn: RequestFn
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.73.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../reqwest/async_impl/response/struct.Response.html" title="struct reqwest::async_impl::response::Response">Response</a>, <a class="enum" href="https://doc.rust-lang.org/1.73.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../reqwest/async_impl/response/struct.Response.html" title="struct reqwest::async_impl::response::Response">Response</a>, <a class="struct" href="../../reqwest/error/struct.Error.html" title="struct reqwest::error::Error">Error</a>&gt;&gt;<span class="where fmt-newline">where
    RequestFn: <a class="trait" href="https://doc.rust-lang.org/1.73.0/core/ops/function/trait.Fn.html" title="trait core::ops::function::Fn">Fn</a>() -&gt; ResultFuture,
    ResultFuture: <a class="trait" href="https://doc.rust-lang.org/1.73.0/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&lt;Output = <a class="enum" href="https://doc.rust-lang.org/1.73.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="../../reqwest/async_impl/response/struct.Response.html" title="struct reqwest::async_impl::response::Response">Response</a>, <a class="struct" href="../../reqwest/error/struct.Error.html" title="struct reqwest::error::Error">Error</a>&gt;&gt;,</span></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Executes the provided request function and awaits the returned future, retrying using the
parameters in the provided <code>ExponentialBackoff</code> if the <a href="../../reqwest/error/struct.Error.html" title="struct reqwest::error::Error"><code>reqwest::Error</code></a> returned by
<code>request_fn</code> is:</p>
<ul>
<li>a timeout</li>
<li>a problem establishing a connection</li>
<li>an HTTP status code indicating a server error</li>
</ul>
<p>If the request eventually succeeds, the value returned by <code>request_fn</code> is returned. If an
unretryable failure occurs or enough transient failures occur, then <code>Err(ret)</code> is returned,
where <code>ret</code> is the <code>Result&lt;reqwest::Response, reqwest::Error&gt;</code> returned by the last call to
<code>request_fn</code>. Retryable failures are logged.</p>
<h2 id="todos"><a href="#todos">TODOs:</a></h2>
<p>This function could take a list of HTTP status codes that should be considered retryable, so
that a caller could opt to retry when it sees 408 Request Timeout or 429 Too Many Requests, but
since none of the servers this is currently used to communicate with ever return those statuses,
we don’t yet need that feature.</p>
</div></details></section></div></main></body></html>